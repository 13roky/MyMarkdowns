# Ajax 基础概念

# 客户端与服务器

服务器：上网过程中，负责**存放和对外提供资源**的电脑，叫做服务器。

客户端：上网过程中，负责**获取和消费资源**的电脑，叫做客户端。

# URL 地址

URL（全称是JniformResourceLocator）中文叫**统一资源定位符**，用于标识互联网上每个资源的唯一存放位置。浏览器只有通过URL地址，才能正确定位资源的存放位置，从而成功访问到对应的资源。

常见的 URL：

https://www.baidu.com

https://jd.com

## URL 的组成部分

URL 一般由三种部分组成：

1. 客户端与服务器之间的**通信协议**。
2. 存有该资源的**服务器名称**。
3. 资源在服务器上具体的**存放位置**。

以[`https://www.cnblogs.com/brokyz/p/16443138.html](<https://www.cnblogs.com/brokyz/p/16443138.html>)举例：`

- http：通信协议。
- [www.cnblogs.com](http://www.cnblogs.com)：服务器名称。
- [brokyz/p/16443138.html](https://www.cnblogs.com/brokyz/p/16443138.html)：资源在服务器上具体的存放位置。

# 客户端与服务器的通信过程

| 客户端                  | web服务器                                 |
| ----------------------- | ----------------------------------------- |
| 1. 打开浏览器           | 1. 服务器接收到客户端发来的资源请求       |
| 2. 输入要访问的网站地址 | 2. 服务器在内部处理这次请求，找到相关资源 |
| 3. 向服务器发起资源请求 | 3. 服务器把找到的资源，响应给客户端       |

注意：

1. 客户端和服务器之间的通信过程，分为**请求——处理——响应**三个步骤。
2. 网页中的每一个资源，都是通过**请求——处理——响应**的方式从服务器获取来的。

## 基于浏览器的开发者工具分析通信过程

1. 在 chrome 开发者工具中切换到 Network 面板。
2. 选中 Doc 页签。
3. 刷新页面，分析客户端与服务器之间的通信过程。

# 服务器提供的常见资源

文字内容、图片、音频、视频….等都是我们网页中的常见资源。

网页中的**数据也是一种资源**。

- HTML 是网页的骨架。
- CSS 是网页的颜值。
- JavaScript 是网页的行为。
- data 是网页的灵魂。

## 网页中如何请求数据

数据，也是服务器对外提供的一种资源。只要是资源，必然要通过请求一处理-响应的方式进行获取。

- 如果要在网页中请求服务器上的数据资源，则需要用到XMLHttpRequest对象。
- XMLHttpRequest（简称xhr）是浏览器提供的 JS 成员，通过它，可以请求服务器上的数据资源。
- 最简单的用法`var xhrObj=new XMLHttpRequest()`

## 资源的请求方式

客户端请求服务器时，请求的方式有很多种，最常见的两种请求方式分别为 `get` 和 `post` 请求。

- `get`请求通常用于获取服务端资源（向服务器要资源）

  例如：根据URL地址，从服务器获取HTML文件、css文件、js文件、图片文件、数据资源等

- `post`请求通常用于向服务器提交数据（往服务器发送资源）

  例如：登录时向服务器**提交的登录信息**、注册时向服务器**提交的注册信息**、添加用户时向服务器**提交的用户信息**等各种**数据提交操作**。

# 了解 Ajax

**什么是Ajax**

Ajax 的全称是 Asynchronous Javascript And XML（异步JavaScript和XML）。

通俗的理解：在网页中利用 XMLHttpRequest 对象和服务器进行数据交互的方式，就是Ajax。

**为什么学习 Ajax**

之前所学的技术，只能把网页做的更美观漂亮，或添加一些动画效果，但是，Ajx能让我们轻松实现网页与服务器之间的数据交互。

**Ajax 典型应用场景**

- 用户名检测：注册用户时，通过 Ajax 的形式，动态检测用户名是否被占用。
- 搜索提示：当输入搜索关键字时，通过 Ajax 的形式，动态加载搜索提示列表。
- 数据分页显示：当点击页码值的时候，通过 Ajax 的形式，根据页码值动态刷新表格的数据。
- 数据的增删改查：数据的添加、删除、修改、查询操作，都需要通过 Ajax 的形式，来实现数据的交互。

# 接口

## 概念

使用 Ajax 请求数据时，**被请求的 URL 地址**，就叫做**数据接口**（简称接口）。同时，每个接口必须有**请求方式**。

例如：

https://autumnfish.cn/api/joke/list   获取笑话的接口（GET请求）

https://mock.apifox.cn/m1/1301638-0-default/pet  添加宠物信息的接口（POST请求）

## 接口的请求过程

- 通过 GET 方式请求接口的过程。
  1. 网页中的 Ajax 向服务器发送 GET 请求。
  2. 服务器收到请求后，在内部处理请求。
  3. 服务器处理完成后，将结果响应给网页。
  4. 网页中的 Ajax 收到响应，呈现给网页。
- 通过 POST 方式请求接口的过程。
  1. 网页中的 Ajax 向服务器发送 POST 请求。
  2. 服务器收到请求后，在内部处理请求。
  3. 服务器处理完成后，将结果响应给网页。
  4. 网页中的 Ajax 收到响应，呈现给网页。

## 接口测试工具

为了验证接口能否被正常访问，我们常常需要使用接口测试工具，来对数据接口进行检测。

接口测试工具能让我们在**不写任何代码**的情况下，**对接口**进行**调用**和**测试**。

可以使用 **apifox** 进行测试：https://www.apifox.cn/

## 接口文档

接口文档就是**接口说明文档，是我们调用接口的依据**。好的接口文档包含了对**接口 URL**、**参数**以及**输出内容**的说明，我们**参照接口文档就能方便的知道接口的作用**，以及接口如何进行调用。

**接口文档的组成部分**

接口文档可以包含很多信息，也可以按需求进行精简，不过，一个合格的接口文档，应该包含以下6项内容，从而为接口的调用提供依据。

1. **接口名称**：用来标识各个接口的简单说明，如登录接口，获取图书列表接口等。
2. **接口 URL**：接口的调用地址。
3. **调用方式**：接口的调用方式，如 GET 或 POST。
4. **参数格式**：接口需要传递的参数，每个参数必须包含**参数名称、参数类型、是否必选、参数说明**这 4 项内容。
5. **相应格式**：接口的返回值的详细描述，一般包含**数据名称、数据类型、说明** 3 项内容。
6. 返回示例（可选）：通过对象的形式，列举服务器返回数据的结构。